(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,5747,e=>{"use strict";var t=e.i(82568);e.i(51718);var r=e.i(18357),i=e.i(44018);class n extends t.WebPlugin{constructor(){super(),this.lastConfirmationResult=new Map;const e=(0,r.getAuth)();e.onAuthStateChanged(e=>this.handleAuthStateChange(e)),e.onIdTokenChanged(e=>void this.handleIdTokenChange(e))}async applyActionCode(e){let t=(0,r.getAuth)();return(0,r.applyActionCode)(t,e.oobCode)}async createUserWithEmailAndPassword(e){let t=(0,r.getAuth)(),i=await (0,r.createUserWithEmailAndPassword)(t,e.email,e.password);return this.createSignInResult(i,null)}async confirmPasswordReset(e){let t=(0,r.getAuth)();return(0,r.confirmPasswordReset)(t,e.oobCode,e.newPassword)}async confirmVerificationCode(e){let{verificationCode:t,verificationId:r}=e,i=this.lastConfirmationResult.get(r);if(!i)throw Error(n.ERROR_CONFIRMATION_RESULT_MISSING);let s=await i.confirm(t);return this.createSignInResult(s,null)}async deleteUser(){let e=(0,r.getAuth)().currentUser;if(!e)throw Error(n.ERROR_NO_USER_SIGNED_IN);return(0,r.deleteUser)(e)}async fetchSignInMethodsForEmail(e){let t=(0,r.getAuth)();return{signInMethods:await (0,r.fetchSignInMethodsForEmail)(t,e.email)}}async getPendingAuthResult(){throw this.unimplemented("Not implemented on web.")}async getCurrentUser(){let e=(0,r.getAuth)();return{user:this.createUserResult(e.currentUser)}}async getIdToken(e){let t=(0,r.getAuth)();if(!t.currentUser)throw Error(n.ERROR_NO_USER_SIGNED_IN);return{token:await t.currentUser.getIdToken(null==e?void 0:e.forceRefresh)||""}}async getIdTokenResult(e){let t=(0,r.getAuth)();if(!t.currentUser)throw Error(n.ERROR_NO_USER_SIGNED_IN);let i=await t.currentUser.getIdTokenResult(null==e?void 0:e.forceRefresh);return Object.assign(Object.assign({},i),{authTime:Date.parse(i.authTime),expirationTime:Date.parse(i.expirationTime),issuedAtTime:Date.parse(i.issuedAtTime)})}async getRedirectResult(){let e=(0,r.getAuth)(),t=await (0,r.getRedirectResult)(e),i=t?r.OAuthProvider.credentialFromResult(t):null;return this.createSignInResult(t,i)}async getTenantId(){return{tenantId:(0,r.getAuth)().tenantId}}async isSignInWithEmailLink(e){let t=(0,r.getAuth)();return{isSignInWithEmailLink:(0,r.isSignInWithEmailLink)(t,e.emailLink)}}async linkWithApple(e){let t=new r.OAuthProvider(i.ProviderId.APPLE);this.applySignInOptions(e||{},t);let n=await this.linkCurrentUserWithPopupOrRedirect(t,null==e?void 0:e.mode),s=r.OAuthProvider.credentialFromResult(n);return this.createSignInResult(n,s)}async linkWithEmailAndPassword(e){let t=r.EmailAuthProvider.credential(e.email,e.password),i=await this.linkCurrentUserWithCredential(t);return this.createSignInResult(i,t)}async linkWithEmailLink(e){let t=r.EmailAuthProvider.credentialWithLink(e.email,e.emailLink),i=await this.linkCurrentUserWithCredential(t);return this.createSignInResult(i,t)}async linkWithFacebook(e){let t=new r.FacebookAuthProvider;this.applySignInOptions(e||{},t);let i=await this.linkCurrentUserWithPopupOrRedirect(t,null==e?void 0:e.mode),n=r.FacebookAuthProvider.credentialFromResult(i);return this.createSignInResult(i,n)}async linkWithGameCenter(){throw this.unimplemented("Not implemented on web.")}async linkWithGithub(e){let t=new r.GithubAuthProvider;this.applySignInOptions(e||{},t);let i=await this.linkCurrentUserWithPopupOrRedirect(t,null==e?void 0:e.mode),n=r.GithubAuthProvider.credentialFromResult(i);return this.createSignInResult(i,n)}async linkWithGoogle(e){let t=new r.GoogleAuthProvider;this.applySignInOptions(e||{},t);let i=await this.linkCurrentUserWithPopupOrRedirect(t,null==e?void 0:e.mode),n=r.GoogleAuthProvider.credentialFromResult(i);return this.createSignInResult(i,n)}async linkWithMicrosoft(e){let t=new r.OAuthProvider(i.ProviderId.MICROSOFT);this.applySignInOptions(e||{},t);let n=await this.linkCurrentUserWithPopupOrRedirect(t,null==e?void 0:e.mode),s=r.OAuthProvider.credentialFromResult(n);return this.createSignInResult(n,s)}async linkWithOpenIdConnect(e){let t=new r.OAuthProvider(e.providerId);this.applySignInOptions(e,t);let i=await this.linkCurrentUserWithPopupOrRedirect(t,e.mode),n=r.OAuthProvider.credentialFromResult(i);return this.createSignInResult(i,n)}async linkWithPhoneNumber(e){let t=(0,r.getAuth)().currentUser;if(!t)throw Error(n.ERROR_NO_USER_SIGNED_IN);if(!e.phoneNumber)throw Error(n.ERROR_PHONE_NUMBER_MISSING);if(!e.recaptchaVerifier||!(e.recaptchaVerifier instanceof r.RecaptchaVerifier))throw Error(n.ERROR_RECAPTCHA_VERIFIER_MISSING);try{let i=await (0,r.linkWithPhoneNumber)(t,e.phoneNumber,e.recaptchaVerifier),{verificationId:s}=i;this.lastConfirmationResult.set(s,i),this.notifyListeners(n.PHONE_CODE_SENT_EVENT,{verificationId:s})}catch(t){let e={message:this.getErrorMessage(t)};this.notifyListeners(n.PHONE_VERIFICATION_FAILED_EVENT,e)}}async linkWithPlayGames(){throw this.unimplemented("Not implemented on web.")}async linkWithTwitter(e){let t=new r.TwitterAuthProvider;this.applySignInOptions(e||{},t);let i=await this.linkCurrentUserWithPopupOrRedirect(t,null==e?void 0:e.mode),n=r.TwitterAuthProvider.credentialFromResult(i);return this.createSignInResult(i,n)}async linkWithYahoo(e){let t=new r.OAuthProvider(i.ProviderId.YAHOO);this.applySignInOptions(e||{},t);let n=await this.linkCurrentUserWithPopupOrRedirect(t,null==e?void 0:e.mode),s=r.OAuthProvider.credentialFromResult(n);return this.createSignInResult(n,s)}async reload(){let e=(0,r.getAuth)().currentUser;if(!e)throw Error(n.ERROR_NO_USER_SIGNED_IN);return(0,r.reload)(e)}async revokeAccessToken(e){let t=(0,r.getAuth)();return(0,r.revokeAccessToken)(t,e.token)}async sendEmailVerification(e){let t=(0,r.getAuth)().currentUser;if(!t)throw Error(n.ERROR_NO_USER_SIGNED_IN);return(0,r.sendEmailVerification)(t,null==e?void 0:e.actionCodeSettings)}async sendPasswordResetEmail(e){let t=(0,r.getAuth)();return(0,r.sendPasswordResetEmail)(t,e.email,e.actionCodeSettings)}async sendSignInLinkToEmail(e){let t=(0,r.getAuth)();return(0,r.sendSignInLinkToEmail)(t,e.email,e.actionCodeSettings)}async setLanguageCode(e){(0,r.getAuth)().languageCode=e.languageCode}async setPersistence(e){let t=(0,r.getAuth)();switch(e.persistence){case i.Persistence.BrowserLocal:await (0,r.setPersistence)(t,r.browserLocalPersistence);break;case i.Persistence.BrowserSession:await (0,r.setPersistence)(t,r.browserSessionPersistence);break;case i.Persistence.IndexedDbLocal:await (0,r.setPersistence)(t,r.indexedDBLocalPersistence);break;case i.Persistence.InMemory:await (0,r.setPersistence)(t,r.inMemoryPersistence)}}async setTenantId(e){(0,r.getAuth)().tenantId=e.tenantId}async signInAnonymously(){let e=(0,r.getAuth)(),t=await (0,r.signInAnonymously)(e);return this.createSignInResult(t,null)}async signInWithApple(e){let t=new r.OAuthProvider(i.ProviderId.APPLE);this.applySignInOptions(e||{},t);let n=await this.signInWithPopupOrRedirect(t,null==e?void 0:e.mode),s=r.OAuthProvider.credentialFromResult(n);return this.createSignInResult(n,s)}async signInWithCustomToken(e){let t=(0,r.getAuth)(),i=await (0,r.signInWithCustomToken)(t,e.token);return this.createSignInResult(i,null)}async signInWithEmailAndPassword(e){let t=(0,r.getAuth)(),i=await (0,r.signInWithEmailAndPassword)(t,e.email,e.password);return this.createSignInResult(i,null)}async signInWithEmailLink(e){let t=(0,r.getAuth)(),i=await (0,r.signInWithEmailLink)(t,e.email,e.emailLink);return this.createSignInResult(i,null)}async signInWithFacebook(e){let t=new r.FacebookAuthProvider;this.applySignInOptions(e||{},t);let i=await this.signInWithPopupOrRedirect(t,null==e?void 0:e.mode),n=r.FacebookAuthProvider.credentialFromResult(i);return this.createSignInResult(i,n)}async signInWithGithub(e){let t=new r.GithubAuthProvider;this.applySignInOptions(e||{},t);let i=await this.signInWithPopupOrRedirect(t,null==e?void 0:e.mode),n=r.GithubAuthProvider.credentialFromResult(i);return this.createSignInResult(i,n)}async signInWithGoogle(e){let t=new r.GoogleAuthProvider;this.applySignInOptions(e||{},t);let i=await this.signInWithPopupOrRedirect(t,null==e?void 0:e.mode),n=r.GoogleAuthProvider.credentialFromResult(i);return this.createSignInResult(i,n)}async signInWithMicrosoft(e){let t=new r.OAuthProvider(i.ProviderId.MICROSOFT);this.applySignInOptions(e||{},t);let n=await this.signInWithPopupOrRedirect(t,null==e?void 0:e.mode),s=r.OAuthProvider.credentialFromResult(n);return this.createSignInResult(n,s)}async signInWithOpenIdConnect(e){let t=new r.OAuthProvider(e.providerId);this.applySignInOptions(e,t);let i=await this.signInWithPopupOrRedirect(t,e.mode),n=r.OAuthProvider.credentialFromResult(i);return this.createSignInResult(i,n)}async signInWithPhoneNumber(e){if(!e.phoneNumber)throw Error(n.ERROR_PHONE_NUMBER_MISSING);if(!e.recaptchaVerifier||!(e.recaptchaVerifier instanceof r.RecaptchaVerifier))throw Error(n.ERROR_RECAPTCHA_VERIFIER_MISSING);let t=(0,r.getAuth)();try{let i=await (0,r.signInWithPhoneNumber)(t,e.phoneNumber,e.recaptchaVerifier),{verificationId:s}=i;this.lastConfirmationResult.set(s,i),this.notifyListeners(n.PHONE_CODE_SENT_EVENT,{verificationId:s})}catch(t){let e={message:this.getErrorMessage(t)};this.notifyListeners(n.PHONE_VERIFICATION_FAILED_EVENT,e)}}async signInWithPlayGames(){throw this.unimplemented("Not implemented on web.")}async signInWithGameCenter(){throw this.unimplemented("Not implemented on web.")}async signInWithTwitter(e){let t=new r.TwitterAuthProvider;this.applySignInOptions(e||{},t);let i=await this.signInWithPopupOrRedirect(t,null==e?void 0:e.mode),n=r.TwitterAuthProvider.credentialFromResult(i);return this.createSignInResult(i,n)}async signInWithYahoo(e){let t=new r.OAuthProvider(i.ProviderId.YAHOO);this.applySignInOptions(e||{},t);let n=await this.signInWithPopupOrRedirect(t,null==e?void 0:e.mode),s=r.OAuthProvider.credentialFromResult(n);return this.createSignInResult(n,s)}async signOut(){let e=(0,r.getAuth)();await e.signOut()}async unlink(e){let t=(0,r.getAuth)();if(!t.currentUser)throw Error(n.ERROR_NO_USER_SIGNED_IN);let i=await (0,r.unlink)(t.currentUser,e.providerId);return{user:this.createUserResult(i)}}async updateEmail(e){let t=(0,r.getAuth)().currentUser;if(!t)throw Error(n.ERROR_NO_USER_SIGNED_IN);return(0,r.updateEmail)(t,e.newEmail)}async updatePassword(e){let t=(0,r.getAuth)().currentUser;if(!t)throw Error(n.ERROR_NO_USER_SIGNED_IN);return(0,r.updatePassword)(t,e.newPassword)}async updateProfile(e){let t=(0,r.getAuth)().currentUser;if(!t)throw Error(n.ERROR_NO_USER_SIGNED_IN);return(0,r.updateProfile)(t,{displayName:e.displayName,photoURL:e.photoUrl})}async useAppLanguage(){(0,r.getAuth)().useDeviceLanguage()}async useEmulator(e){let t=(0,r.getAuth)(),i=e.port||9099,n=e.scheme||"http";e.host.includes("://")?(0,r.connectAuthEmulator)(t,`${e.host}:${i}`):(0,r.connectAuthEmulator)(t,`${n}://${e.host}:${i}`)}async verifyBeforeUpdateEmail(e){let t=(0,r.getAuth)().currentUser;if(!t)throw Error(n.ERROR_NO_USER_SIGNED_IN);return(0,r.verifyBeforeUpdateEmail)(t,null==e?void 0:e.newEmail,null==e?void 0:e.actionCodeSettings)}handleAuthStateChange(e){let t=this.createUserResult(e);this.notifyListeners(n.AUTH_STATE_CHANGE_EVENT,{user:t},!0)}async handleIdTokenChange(e){if(!e)return;let t=await e.getIdToken(!1);this.notifyListeners(n.ID_TOKEN_CHANGE_EVENT,{token:t},!0)}applySignInOptions(e,t){if(e.customParameters){let r={};e.customParameters.map(e=>{r[e.key]=e.value}),t.setCustomParameters(r)}if(e.scopes)for(let r of e.scopes)t.addScope(r)}signInWithPopupOrRedirect(e,t){let i=(0,r.getAuth)();return"redirect"===t?(0,r.signInWithRedirect)(i,e):(0,r.signInWithPopup)(i,e)}linkCurrentUserWithPopupOrRedirect(e,t){let i=(0,r.getAuth)();if(!i.currentUser)throw Error(n.ERROR_NO_USER_SIGNED_IN);return"redirect"===t?(0,r.linkWithRedirect)(i.currentUser,e):(0,r.linkWithPopup)(i.currentUser,e)}linkCurrentUserWithCredential(e){let t=(0,r.getAuth)();if(!t.currentUser)throw Error(n.ERROR_NO_USER_SIGNED_IN);return(0,r.linkWithCredential)(t.currentUser,e)}requestAppTrackingTransparencyPermission(){throw this.unimplemented("Not implemented on web.")}checkAppTrackingTransparencyPermission(){throw this.unimplemented("Not implemented on web.")}createSignInResult(e,t){return{user:this.createUserResult((null==e?void 0:e.user)||null),credential:this.createCredentialResult(t),additionalUserInfo:this.createAdditionalUserInfoResult(e)}}createCredentialResult(e){if(!e)return null;let t={providerId:e.providerId};return e instanceof r.OAuthCredential&&(t.accessToken=e.accessToken,t.idToken=e.idToken,t.secret=e.secret),t}createUserResult(e){return e?{displayName:e.displayName,email:e.email,emailVerified:e.emailVerified,isAnonymous:e.isAnonymous,metadata:this.createUserMetadataResult(e.metadata),phoneNumber:e.phoneNumber,photoUrl:e.photoURL,providerData:this.createUserProviderDataResult(e.providerData),providerId:e.providerId,tenantId:e.tenantId,uid:e.uid}:null}createUserMetadataResult(e){let t={};return e.creationTime&&(t.creationTime=Date.parse(e.creationTime)),e.lastSignInTime&&(t.lastSignInTime=Date.parse(e.lastSignInTime)),t}createUserProviderDataResult(e){return e.map(e=>({displayName:e.displayName,email:e.email,phoneNumber:e.phoneNumber,photoUrl:e.photoURL,providerId:e.providerId,uid:e.uid}))}createAdditionalUserInfoResult(e){if(!e)return null;let t=(0,r.getAdditionalUserInfo)(e);if(!t)return null;let{isNewUser:i,profile:n,providerId:s,username:a}=t,o={isNewUser:i};return null!==s&&(o.providerId=s),null!==n&&(o.profile=n),null!=a&&(o.username=a),o}getErrorMessage(e){return e instanceof Object&&"message"in e&&"string"==typeof e.message?e.message:JSON.stringify(e)}}n.AUTH_STATE_CHANGE_EVENT="authStateChange",n.ID_TOKEN_CHANGE_EVENT="idTokenChange",n.PHONE_CODE_SENT_EVENT="phoneCodeSent",n.PHONE_VERIFICATION_FAILED_EVENT="phoneVerificationFailed",n.ERROR_NO_USER_SIGNED_IN="No user is signed in.",n.ERROR_PHONE_NUMBER_MISSING="phoneNumber must be provided.",n.ERROR_RECAPTCHA_VERIFIER_MISSING="recaptchaVerifier must be provided and must be an instance of RecaptchaVerifier.",n.ERROR_CONFIRMATION_RESULT_MISSING="No confirmation result with this verification id was found.",e.s(["FirebaseAuthenticationWeb",()=>n])}]);